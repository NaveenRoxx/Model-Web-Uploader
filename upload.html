<!DOCTYPE html>
<html>
<head>
  <title>Upload 3D Model</title>
</head>
<body>
  <h1>Upload 3D Model (.glb)</h1>
  <input type="file" id="fileInput" />
  <input type="text" id="modelName" placeholder="Model Name" />
  <button onclick="uploadModel()">Upload</button>
  <p id="status"></p>

  <script>
    const repo = "NaveenRoxx/Model-Web-Uploader";
    const token = "ghp_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"; // Replace in Step 3
    const branch = "main";

    async function uploadModel() {
      const file = document.getElementById("fileInput").files[0];
      const modelName = document.getElementById("modelName").value;
      const status = document.getElementById("status");

      if (!file || !modelName) {
        status.innerText = "Please select a file and enter a model name.";
        return;
      }

      const reader = new FileReader();
      reader.onload = async () => {
        const base64 = reader.result.split(",")[1];
        const path = `models/${file.name}`;
        const url = `https://api.github.com/repos/${repo}/contents/${path}`;

        const response = await fetch(url, {
          method: "PUT",
          headers: {
            "Authorization": `token ${token}`,
            "Content-Type": "application/json"
          },
          body: JSON.stringify({
            message: `Upload model ${file.name}`,
            content: base64,
            branch: branch
          })
        });

        if (response.ok) {
          status.innerText = `Uploaded: ${file.name}`;
        } else {
          const data = await response.json();
          status.innerText = `Error: ${data.message}`;
        }
      };
      reader.readAsDataURL(file);
    }
  </script>
</body>
</html>
